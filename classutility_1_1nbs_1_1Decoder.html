<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NUbots: utility::nbs::Decoder Class Reference</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <!--START doxygen_awesome-->
    <script type="text/javascript" src="styles/doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript">
      DoxygenAwesomeDarkModeToggle.init();
    </script>
    <!--END doxygen_awesome-->
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <a href="https://github.com/NUbots/NUbots" class="github-corner" title="View source on GitHub" target="_blank">
      <svg
        viewBox="0 0 250 250"
        width="40"
        height="40"
        style="position: absolute; top: 0; border: 0; right: 0; z-index: 99"
        aria-hidden="true"
      >
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor"
          style="transform-origin: 130px 106px"
          class="octo-arm"
        ></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor"
          class="octo-body"
        ></path></svg></a
    ><style>
      .github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out;
      }
      @keyframes octocat-wave {
        0%,
        100% {
          transform: rotate(0);
        }
        20%,
        60% {
          transform: rotate(-25deg);
        }
        40%,
        80% {
          transform: rotate(10deg);
        }
      }
      @media (max-width: 500px) {
        .github-corner:hover .octo-arm {
          animation: none;
        }
        .github-corner .octo-arm {
          animation: octocat-wave 560ms ease-in-out;
        }
      }
    </style>
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo"><img alt="Logo" src="banner.png" /></td>
                <td id="projectalign">
                  <div id="projectname">
                    NUbots
                  </div>
                  <div id="projectbrief">NUbots Main Codebase</div>
                </td>
              </tr>
              <!--BEGIN FULL_SIDEBAR-->
              <tr>
                <td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
              </tr>
              <!--END FULL_SIDEBAR-->
            </tbody>
          </table>
        </div>
        <!-- end header part -->
      </div>
    </div>
  </body>
</html>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classutility_1_1nbs_1_1Decoder.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classutility_1_1nbs_1_1Decoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">utility::nbs::Decoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for utility::nbs::Decoder:</div>
<div class="dyncontent">
<div class="center"><img src="classutility_1_1nbs_1_1Decoder__coll__graph.png" border="0" usemap="#autility_1_1nbs_1_1Decoder_coll__map" alt="Collaboration graph"/></div>
<map name="autility_1_1nbs_1_1Decoder_coll__map" id="autility_1_1nbs_1_1Decoder_coll__map">
<area shape="rect" title=" " alt="" coords="5,95,157,121"/>
<area shape="rect" href="classutility_1_1nbs_1_1Index.html" title=" " alt="" coords="14,5,149,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a944eb48615d5eb0fa686c4502a09402c"><td class="memItemLeft" align="right" valign="top"><a id="a944eb48615d5eb0fa686c4502a09402c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Decoder</b> (const std::filesystem::path &amp;path, const std::function&lt; void(const std::filesystem::path &amp;, const uint64_t &amp;, const uint64_t &amp;)&gt; &amp;progress={})</td></tr>
<tr class="separator:a944eb48615d5eb0fa686c4502a09402c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad6a25d4312c65576d998cb75e77d56"><td class="memItemLeft" align="right" valign="top"><a id="a9ad6a25d4312c65576d998cb75e77d56"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Decoder</b> (const std::vector&lt; std::filesystem::path &gt; &amp;paths, const std::function&lt; void(const std::filesystem::path &amp;, const uint64_t &amp;, const uint64_t &amp;)&gt; &amp;progress={})</td></tr>
<tr class="separator:a9ad6a25d4312c65576d998cb75e77d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad918623446352433e817104f1223faa0"><td class="memTemplParams" colspan="2"><a id="ad918623446352433e817104f1223faa0"></a>
template&lt;typename MessageType &gt; </td></tr>
<tr class="memitem:ad918623446352433e817104f1223faa0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>on</b> (const std::function&lt; void(const MessageType &amp;)&gt; &amp;callback)</td></tr>
<tr class="separator:ad918623446352433e817104f1223faa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d86847ec8c484adb5667cdd59b0cd02"><td class="memTemplParams" colspan="2"><a id="a0d86847ec8c484adb5667cdd59b0cd02"></a>
template&lt;typename MessageType &gt; </td></tr>
<tr class="memitem:a0d86847ec8c484adb5667cdd59b0cd02"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>on</b> (const std::function&lt; void(const NUClear::clock::time_point &amp;, const MessageType &amp;)&gt; &amp;callback)</td></tr>
<tr class="separator:a0d86847ec8c484adb5667cdd59b0cd02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa36c610a94ff0f1a6cd16538341de3"><td class="memTemplParams" colspan="2"><a id="a3aa36c610a94ff0f1a6cd16538341de3"></a>
template&lt;typename MessageType &gt; </td></tr>
<tr class="memitem:a3aa36c610a94ff0f1a6cd16538341de3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>on</b> (const std::function&lt; void(const NUClear::clock::time_point &amp;, const NUClear::clock::time_point &amp;, const MessageType &amp;)&gt; &amp;callback)</td></tr>
<tr class="separator:a3aa36c610a94ff0f1a6cd16538341de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3fc6e739ed8e79110a59b7dd6931872"><td class="memTemplParams" colspan="2">template&lt;typename MessageType &gt; </td></tr>
<tr class="memitem:af3fc6e739ed8e79110a59b7dd6931872"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classutility_1_1nbs_1_1Decoder.html#af3fc6e739ed8e79110a59b7dd6931872">on</a> (const std::function&lt; void(const NUClear::clock::time_point &amp;, const NUClear::clock::time_point &amp;, const uint8_t *, const uint32_t &amp;)&gt; &amp;callback)</td></tr>
<tr class="memdesc:af3fc6e739ed8e79110a59b7dd6931872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the callback for a specific type for the decoder.  <a href="classutility_1_1nbs_1_1Decoder.html#af3fc6e739ed8e79110a59b7dd6931872">More...</a><br /></td></tr>
<tr class="separator:af3fc6e739ed8e79110a59b7dd6931872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f4c152c1187daa6dd609b34978190d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutility_1_1nbs_1_1Decoder.html#a20f4c152c1187daa6dd609b34978190d">process</a> (const std::function&lt; void(const uint64_t &amp;, const uint64_t &amp;, const uint64_t &amp;, const uint64_t &amp;)&gt; &amp;progress={})</td></tr>
<tr class="memdesc:a20f4c152c1187daa6dd609b34978190d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the loaded files using the current callbacks.  <a href="classutility_1_1nbs_1_1Decoder.html#a20f4c152c1187daa6dd609b34978190d">More...</a><br /></td></tr>
<tr class="separator:a20f4c152c1187daa6dd609b34978190d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aab37fdd21ec2a92487833acb948ff29e"><td class="memItemLeft" align="right" valign="top"><a id="aab37fdd21ec2a92487833acb948ff29e"></a>
std::map&lt; uint64_t, std::function&lt; void(const NUClear::clock::time_point &amp;, const NUClear::clock::time_point &amp;, const uint8_t *, const uint32_t &amp;)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutility_1_1nbs_1_1Decoder.html#aab37fdd21ec2a92487833acb948ff29e">callbacks</a></td></tr>
<tr class="memdesc:aab37fdd21ec2a92487833acb948ff29e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The map of callbacks that will be executed when a message of the appropriate hash type is found. <br /></td></tr>
<tr class="separator:aab37fdd21ec2a92487833acb948ff29e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ace2b14f6723bad3c2278fd3a9fc58b"><td class="memItemLeft" align="right" valign="top"><a id="a6ace2b14f6723bad3c2278fd3a9fc58b"></a>
<a class="el" href="classutility_1_1nbs_1_1Index.html">Index</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutility_1_1nbs_1_1Decoder.html#a6ace2b14f6723bad3c2278fd3a9fc58b">index</a></td></tr>
<tr class="memdesc:a6ace2b14f6723bad3c2278fd3a9fc58b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The index that has been constructed from the loaded nbs files. <br /></td></tr>
<tr class="separator:a6ace2b14f6723bad3c2278fd3a9fc58b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b92e579cd3d84021a2170ac4619ad5"><td class="memItemLeft" align="right" valign="top"><a id="ac6b92e579cd3d84021a2170ac4619ad5"></a>
std::vector&lt; mio::ummap_source &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutility_1_1nbs_1_1Decoder.html#ac6b92e579cd3d84021a2170ac4619ad5">mmaps</a></td></tr>
<tr class="memdesc:ac6b92e579cd3d84021a2170ac4619ad5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The memory mapped IO nbs files. <br /></td></tr>
<tr class="separator:ac6b92e579cd3d84021a2170ac4619ad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af3fc6e739ed8e79110a59b7dd6931872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3fc6e739ed8e79110a59b7dd6931872">&#9670;&nbsp;</a></span>on()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MessageType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void utility::nbs::Decoder::on </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(const NUClear::clock::time_point &amp;, const NUClear::clock::time_point &amp;, const uint8_t *, const uint32_t &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the callback for a specific type for the decoder. </p>
<p>If you call this function again with a new callback for the same message type it will override the old callback that was set.</p>
<p>The arguments that are passed to this callback are the following: </p><pre class="fragment"> NUClear::clock::time_point The timestamp that was extracted from the nbs files emit time (when the
 message was emitted)

 NUClear::clock::time_point The timestamp that was provided from the nbs index, this will be the
 timestamp that was stored in the message, or if unavailable the timestamp from the nbs file's emit time

 const uint8_t* the pointer to the memory mapped location where the packet begins

 const uint32_t&amp; the length of the packet that is stored in that memory mapped location
</pre> <dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">MessageType</td><td>the message type to set the callback for</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>the callback to set for this specific message type </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20f4c152c1187daa6dd609b34978190d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20f4c152c1187daa6dd609b34978190d">&#9670;&nbsp;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void utility::nbs::Decoder::process </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(const uint64_t &amp;, const uint64_t &amp;, const uint64_t &amp;, const uint64_t &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>progress</em> = <code>{}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the loaded files using the current callbacks. </p>
<p>This will go through the entire file in timestamp order and call the callbacks for each message. This is done single threaded so if any multiprocessing is to be done it will have to happen from within the callbacks.</p>
<p>The callback to this function will constantly be fed the current and total number of bytes that we have moved through the file. As well as the current and total number of messages we have moved through the file. This can be used to monitor the progress and update a progress bar.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progress</td><td>the callback that will be provided with byte progress updates through the file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>shared/utility/nbs/<a class="el" href="Decoder_8hpp_source.html">Decoder.hpp</a></li>
<li>shared/utility/nbs/Decoder.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>utility</b></li><li class="navelem"><b>nbs</b></li><li class="navelem"><a class="el" href="classutility_1_1nbs_1_1Decoder.html">Decoder</a></li>
    <li class="footer">Generated on Tue Apr 2 2024 08:37:38 for NUbots by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
